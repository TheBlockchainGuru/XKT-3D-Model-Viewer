(this.webpackJsonpcode=this.webpackJsonpcode||[]).push([[0],{91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var o=n(26),i=n(53),r=n.n(i),s=n(2),a=n(3),c=n(8),l=n(9),u=n(58),d=n(61),h=n(62),p=n(43),v=n(17),m=function(e){var t=function(t){Object(c.a)(o,t);var n=Object(l.a)(o);function o(){return Object(s.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"componentDidMount",value:function(){var e=this.props,t=e.camera,n=e.bcfViewpoint;this.setUpViewer(),t&&this.setCamera(),this.loadPlugins();var o=this.loadModels();n&&this.setBCFViewpoints(o),this.pickEntity()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props;if(e.models!==n.models){var o=Object(p.difference)(n.models,e.models),i=Object(p.difference)(e.models,n.models),r=o.map((function(e){return t.modelLoader.load(e)}));n.bcfViewpoint&&this.setBCFViewpoints(r),i.forEach((function(e){var n=e.id;t.viewer.scene.models[n].destroy()}))}}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"setUpViewer",value:function(){var e=this.props.canvasID;this.viewer=new u.a({canvasId:e})}},{key:"setCamera",value:function(){var e=this.viewer.scene.camera,t=this.props.camera,n=t.eye,o=t.look,i=t.up,r=t.zoom;e.eye=n,e.look=o,e.up=i,e.zoom(r)}},{key:"setBCFViewpoints",value:function(e){var t=this,n=this.props.bcfViewpoint,o=e.map((function(e){return new Promise((function(t){return e.on("loaded",t)}))}));Promise.all(o).then((function(){return t.BCFViewpointsPlugin.setViewpoint(n)}))}},{key:"loadModels",value:function(){var e=this;return this.props.models.map((function(t){return e.modelLoader.load(t)}))}},{key:"loadPlugins",value:function(){var t=this.props,n=t.bcfViewpoint,o=t.navCubeSettings;this.modelLoader=new e(this.viewer),n&&(this.BCFViewpointsPlugin=new d.a(this.viewer)),o&&new h.a(this.viewer,o)}},{key:"pickEntity",value:function(){var e=this.props.eventToPickOn,t=null,n=null,o=this.viewer.scene;o.input.on(e,(function(e){var i=o.pick({canvasPos:e});i?(console.log(i.entity.id),t&&i.entity.id===t.id||(t&&(t.colorize=n),t=i.entity,n=i.entity.colorize.slice(),i.entity.colorize=[0,1,0])):t&&(t.colorize=n,t=null)}))}},{key:"takeScreenshot",value:function(){var e=this.viewer.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasID,o=t.width,i=t.height,r=t.navCubeSettings,s=t.enableScreenshot;return Object(v.jsxs)("div",{children:[Object(v.jsx)("canvas",{id:n,width:o,height:i,className:"d-block mx-auto border border-secondary m-3 mw-100"}),r?Object(v.jsx)("canvas",{id:r.canvasId,width:r.canvasWidth,height:r.canvasHeight,className:"d-block mx-auto mw-100"}):null,s?Object(v.jsx)("button",{type:"button",id:"take-screenshot",className:"btn btn-primary",onClick:function(){return e.takeScreenshot()},children:"Take Screenshot"}):null]})}}]),o}(o.Component);return t.defaultProps={eventToPickOn:"mouseclicked"},t},f=n(60),w=n(59),b=(m(f.a),m(w.a)),k=n(63),j=n(54),y=n.n(j),g=n(55),O=y()((function(e){return{currentModel:{id:"model",src:"./xkt/model.xkt",edges:!0,performacne:!0},updateCurrentModel:function(t){return e(Object(g.a)((function(e){e.currentModel=Object(k.a)({},t)})))}}})),x=function(){var e=O((function(e){return e.currentModel}));return Object(v.jsx)("div",{children:Object(v.jsx)(b,{canvasID:"canvas-xkt",width:window.innerWidth,height:window.innerHeight,models:[e]})})},C=(n(72),n(56)),V=n.n(C),P=n(57),S=n.n(P),z=function(){return Object(v.jsx)("div",{style:{position:"fixed",left:0,top:0,height:"100vh",width:400,background:"white"},children:Object(v.jsx)(V.a,{getUploadParams:function(e){e.meta;return{url:"https://httpbin.org/post"}},onSubmit:function(e,t){for(var n=new FormData,o=0;o<t.length;o++)n.append("file",t[o].file);console.error(t[0]),S.a.post("http://178.62.53.223:4000/upload",n).then((function(e){})).catch((function(e){console.warn(e)}))},maxFiles:2,accept:".xkt,.json",styles:{dropzone:{overflow:"hidden",border:"none",height:"100vh"}}})})},B=(n(91),function(){return Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(x,{}),Object(v.jsx)(z,{})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(v.jsx)(B,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[92,1,2]]]);
//# sourceMappingURL=main.f42e60b2.chunk.js.map