(this.webpackJsonpcode=this.webpackJsonpcode||[]).push([[0],{91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var i=n(26),o=n(54),r=n.n(o),s=n(2),a=n(3),c=n(8),l=n(9),d=n(58),u=n(61),h=n(62),v=n(43),p=n(17),f=function(e){var t=function(t){Object(c.a)(i,t);var n=Object(l.a)(i);function i(){return Object(s.a)(this,i),n.apply(this,arguments)}return Object(a.a)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.camera,n=e.bcfViewpoint;this.setUpViewer(),t&&this.setCamera(),this.loadPlugins();var i=this.loadModels();n&&this.setBCFViewpoints(i),this.pickEntity()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props;if(e.models!==n.models){var i=Object(v.difference)(n.models,e.models),o=Object(v.difference)(e.models,n.models),r=i.map((function(e){return t.modelLoader.load(e)}));n.bcfViewpoint&&this.setBCFViewpoints(r),o.forEach((function(e){var n=e.id;t.viewer.scene.models[n].destroy()}))}}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"setUpViewer",value:function(){var e=this.props.canvasID;this.viewer=new d.a({canvasId:e})}},{key:"setCamera",value:function(){var e=this.viewer.scene.camera,t=this.props.camera,n=t.eye,i=t.look,o=t.up,r=t.zoom;e.eye=n,e.look=i,e.up=o,e.zoom(r)}},{key:"setBCFViewpoints",value:function(e){var t=this,n=this.props.bcfViewpoint,i=e.map((function(e){return new Promise((function(t){return e.on("loaded",t)}))}));Promise.all(i).then((function(){return t.BCFViewpointsPlugin.setViewpoint(n)}))}},{key:"loadModels",value:function(){var e=this;return this.props.models.map((function(t){return e.modelLoader.load(t)}))}},{key:"loadPlugins",value:function(){var t=this.props,n=t.bcfViewpoint,i=t.navCubeSettings;this.modelLoader=new e(this.viewer),n&&(this.BCFViewpointsPlugin=new u.a(this.viewer)),i&&new h.a(this.viewer,i)}},{key:"pickEntity",value:function(){var e=this.props.eventToPickOn,t=null,n=null,i=this.viewer.scene;i.input.on(e,(function(e){var o=i.pick({canvasPos:e});o?(console.log(o.entity.id),t&&o.entity.id===t.id||(t&&(t.colorize=n),t=o.entity,n=o.entity.colorize.slice(),o.entity.colorize=[0,1,0])):t&&(t.colorize=n,t=null)}))}},{key:"takeScreenshot",value:function(){var e=this.viewer.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasID,i=t.width,o=t.height,r=t.navCubeSettings,s=t.enableScreenshot;return Object(p.jsxs)("div",{children:[Object(p.jsx)("canvas",{id:n,width:i,height:o,className:"d-block mx-auto border border-secondary m-3 mw-100"}),r?Object(p.jsx)("canvas",{id:r.canvasId,width:r.canvasWidth,height:r.canvasHeight,className:"d-block mx-auto mw-100"}):null,s?Object(p.jsx)("button",{type:"button",id:"take-screenshot",className:"btn btn-primary",onClick:function(){return e.takeScreenshot()},children:"Take Screenshot"}):null]})}}]),i}(i.Component);return t.defaultProps={eventToPickOn:"mouseclicked"},t},m=n(60),w=n(59),b=(f(m.a),f(w.a)),j=n(63),g=n(55),k=n.n(g),y=n(45),O=k()((function(e){return{currentModel:{id:"model",src:"./xkt/model.xkt",edges:!0,performacne:!0},updateCurrentModel:function(t){return e(Object(y.a)((function(e){e.currentModel=Object(j.a)({},t)})))},isLoading:!1,setIsLoading:function(t){return e(Object(y.a)((function(e){e.isLoading=t})))}}})),x=function(){var e=O((function(e){return e.currentModel}));return Object(p.jsx)("div",{children:Object(p.jsx)(b,{canvasID:"canvas-xkt",width:window.innerWidth,height:window.innerHeight,models:[e]})})},_=(n(72),n(56)),C=n.n(_),V=n(57),P=n.n(V),I=function(){var e=O((function(e){return e.setIsLoading}));return Object(p.jsx)("div",{style:{position:"fixed",left:0,top:0,height:"100vh",width:400,background:"white"},children:Object(p.jsx)(C.a,{getUploadParams:function(e){e.meta;return{url:"https://httpbin.org/post"}},onSubmit:function(t,n){for(var i=new FormData,o=0;o<n.length;o++)i.append("file",n[o].file);console.error(n[0]),e(!0),P.a.post("http://178.62.53.223:4000/upload",i).then((function(e){window.location.reload()})).catch((function(e){console.warn(e)}))},maxFiles:2,accept:".xkt,.json",styles:{dropzone:{overflow:"hidden",border:"none",height:"100vh"}}})})},L=function(){return Object(p.jsx)("div",{class:"loading",children:Object(p.jsxs)("div",{class:"loading__container",children:[Object(p.jsx)("div",{class:"loading__container__yellow"}),Object(p.jsx)("div",{class:"loading__container__red"}),Object(p.jsx)("div",{class:"loading__container__blue"}),Object(p.jsx)("div",{class:"loading__container__violet"})]})})},S=(n(91),function(){var e=O((function(e){return e.isLoading}));return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(x,{}),Object(p.jsx)(I,{}),e?Object(p.jsx)(L,{}):null]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(p.jsx)(S,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[92,1,2]]]);
//# sourceMappingURL=main.a600e8ab.chunk.js.map